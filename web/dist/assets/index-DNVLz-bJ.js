import{r as j,a as he,R as ue}from"./vendor-react-KfUPlHYY.js";import{R as G,C as ge,a as X,X as Y,Y as O,T as z,L as Q,A as ae,b as R,c as ce,d as le,B as pe,e as re,P as fe,f as je,g as be}from"./vendor-recharts-haCkjrkJ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const m of n)if(m.type==="childList")for(const o of m.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const m={};return n.integrity&&(m.integrity=n.integrity),n.referrerPolicy&&(m.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?m.credentials="include":n.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(n){if(n.ep)return;n.ep=!0;const m=a(n);fetch(n.href,m)}})();var oe={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ke=j,Ne=Symbol.for("react.element"),ye=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,we=ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$e={key:!0,ref:!0,__self:!0,__source:!0};function xe(t,s,a){var d,n={},m=null,o=null;a!==void 0&&(m=""+a),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(o=s.ref);for(d in s)ve.call(s,d)&&!$e.hasOwnProperty(d)&&(n[d]=s[d]);if(t&&t.defaultProps)for(d in s=t.defaultProps,s)n[d]===void 0&&(n[d]=s[d]);return{$$typeof:Ne,type:t,key:m,ref:o,props:n,_owner:we.current}}q.Fragment=ye;q.jsx=xe;q.jsxs=xe;oe.exports=q;var e=oe.exports,Z={},ne=he;Z.createRoot=ne.createRoot,Z.hydrateRoot=ne.hydrateRoot;function Se({metrics:t,theme:s="dark"}){const[a,d]=j.useState([]),n=j.useRef(0),m=j.useRef({uplink:0,downlink:0}),[o,b]=j.useState(!0),[$,i]=j.useState("throughput"),g=s==="dark"?"#334155":"#e2e8f0",h=s==="dark"?"#64748b":"#94a3b8",k=s==="dark"?"#1e293b":"#ffffff",x=s==="dark"?"#334155":"#e2e8f0",v=s==="dark"?"#e2e8f0":"#1e293b",y=s==="dark"?"text-slate-400":"text-gray-500",S=s==="dark"?"bg-slate-700/30":"bg-gray-100",r=s==="dark"?"bg-slate-700":"bg-gray-200",f=s==="dark"?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900";j.useEffect(()=>{const w=Date.now();if(w-n.current<900)return;n.current=w;const u=new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),p=t.uplink.throughput_mbps,l=t.downlink.throughput_mbps,c=t.uplink.packets-m.current.uplink,_=t.downlink.packets-m.current.downlink;m.current={uplink:t.uplink.packets,downlink:t.downlink.packets};const M=Math.max(p,l);M>.1?b(!1):M<.01&&a.every(T=>T.uplink<100&&T.downlink<100)&&b(!0),d(T=>{const A=o?1e3:1,U=p*A,W=l*A,F={time:u,timestamp:w,uplink:Math.round(U*1e4)/1e4,downlink:Math.round(W*1e4)/1e4,uplinkPkts:c>0?c:0,downlinkPkts:_>0?_:0};(p>0||l>0)&&console.log(`TrafficChart: raw=${p.toFixed(6)}/${l.toFixed(6)} Mbps, display=${F.uplink}/${F.downlink} ${o?"Kbps":"Mbps"}`);const B=[...T,F];return B.length>60?B.slice(-60):B})},[t,o]);const N=j.useMemo(()=>{if(a.length===0)return null;const w=a.map(c=>c.uplink),u=a.map(c=>c.downlink),p=a.map(c=>c.uplinkPkts),l=a.map(c=>c.downlinkPkts);return{uplink:{avg:w.reduce((c,_)=>c+_,0)/w.length,max:Math.max(...w),min:Math.min(...w.filter(c=>c>0)||[0]),current:w[w.length-1]||0},downlink:{avg:u.reduce((c,_)=>c+_,0)/u.length,max:Math.max(...u),min:Math.min(...u.filter(c=>c>0)||[0]),current:u[u.length-1]||0},packets:{uplinkTotal:p.reduce((c,_)=>c+_,0),downlinkTotal:l.reduce((c,_)=>c+_,0),uplinkAvg:p.reduce((c,_)=>c+_,0)/p.length,downlinkAvg:l.reduce((c,_)=>c+_,0)/l.length}}},[a]),L=j.useMemo(()=>{if(a.length===0)return[0,1];const w=$==="packets"?a.flatMap(l=>[l.uplinkPkts,l.downlinkPkts]):a.flatMap(l=>[l.uplink,l.downlink]),u=Math.max(...w,.001);let p;return $==="packets"?u<=10?p=10:u<=50?p=50:u<=100?p=100:u<=500?p=500:u<=1e3?p=1e3:p=Math.ceil(u/500)*500:o?u<=.1?p=.5:u<=.5?p=1:u<=1?p=2:u<=2?p=5:u<=5?p=10:u<=10?p=20:u<=20?p=50:u<=50?p=100:u<=100?p=200:u<=200?p=500:u<=500?p=1e3:p=Math.ceil(u/500)*500:u<=.1?p=.1:u<=.5?p=.5:u<=1?p=1:u<=2?p=2:u<=5?p=5:u<=10?p=10:u<=20?p=20:u<=50?p=50:u<=100?p=100:p=Math.ceil(u/50)*50,[0,p]},[a,o,$]),E=(w,u)=>a.length<=10?w:u%10===0||u===a.length-1?w.slice(0,5):"";if(a.length<2)return e.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-pulse mb-2",children:"üìä"}),e.jsx("p",{children:"Collecting data..."})]})});const D=$==="packets"?"pps":o?"Kbps":"Mbps";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm ${y}`,children:"View:"}),e.jsx("div",{className:`flex ${r} rounded-lg p-1`,children:["throughput","packets","combined"].map(w=>e.jsx("button",{onClick:()=>i(w),className:`px-3 py-1 text-sm rounded-md transition-colors ${$===w?"bg-blue-500 text-white":f}`,children:w==="throughput"?"üìà Throughput":w==="packets"?"üì¶ Packets":"üìä Combined"},w))})]}),N&&e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:y,children:"UL:"}),e.jsx("span",{className:"text-green-400 font-mono",children:$==="packets"?`${N.packets.uplinkAvg.toFixed(0)} pps`:`${N.uplink.current.toFixed(2)} ${D}`}),e.jsxs("span",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:["(avg: ",N.uplink.avg.toFixed(2),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:y,children:"DL:"}),e.jsx("span",{className:"text-blue-400 font-mono",children:$==="packets"?`${N.packets.downlinkAvg.toFixed(0)} pps`:`${N.downlink.current.toFixed(2)} ${D}`}),e.jsxs("span",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:["(avg: ",N.downlink.avg.toFixed(2),")"]})]})]})]}),e.jsx("div",{className:"h-56",children:e.jsx(G,{width:"100%",height:"100%",children:$==="combined"?e.jsxs(ge,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(X,{strokeDasharray:"3 3",stroke:g}),e.jsx(Y,{dataKey:"time",stroke:h,fontSize:11,tickLine:!1,tickFormatter:E,interval:0}),e.jsx(O,{yAxisId:"left",stroke:h,fontSize:12,tickLine:!1,axisLine:!1,domain:L,label:{value:D,angle:-90,position:"insideLeft",style:{fill:h,fontSize:11}}}),e.jsx(O,{yAxisId:"right",orientation:"right",stroke:h,fontSize:12,tickLine:!1,axisLine:!1,label:{value:"pps",angle:90,position:"insideRight",style:{fill:h,fontSize:11}}}),e.jsx(z,{contentStyle:{backgroundColor:k,border:`1px solid ${x}`,borderRadius:"8px"},labelStyle:{color:v}}),e.jsx(Q,{}),e.jsx(ae,{yAxisId:"left",type:"monotone",dataKey:"uplink",fill:"#22c55e",fillOpacity:.2,stroke:"#22c55e",strokeWidth:2,name:`‚Üë UL (${D})`}),e.jsx(ae,{yAxisId:"left",type:"monotone",dataKey:"downlink",fill:"#3b82f6",fillOpacity:.2,stroke:"#3b82f6",strokeWidth:2,name:`‚Üì DL (${D})`}),e.jsx(R,{yAxisId:"right",type:"monotone",dataKey:"uplinkPkts",stroke:"#86efac",strokeWidth:1,strokeDasharray:"5 5",dot:!1,name:"‚Üë UL pps"}),e.jsx(R,{yAxisId:"right",type:"monotone",dataKey:"downlinkPkts",stroke:"#93c5fd",strokeWidth:1,strokeDasharray:"5 5",dot:!1,name:"‚Üì DL pps"})]}):e.jsxs(ce,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(X,{strokeDasharray:"3 3",stroke:g}),e.jsx(Y,{dataKey:"time",stroke:h,fontSize:11,tickLine:!1,tickFormatter:E,interval:0,tick:{fill:h}}),e.jsx(O,{stroke:h,fontSize:12,tickLine:!1,axisLine:!1,domain:L,tickFormatter:w=>`${w}`,width:50,label:{value:D,angle:-90,position:"insideLeft",style:{fill:h,fontSize:11}}}),N&&$==="throughput"&&e.jsxs(e.Fragment,{children:[e.jsx(le,{y:N.uplink.avg,stroke:"#22c55e",strokeDasharray:"3 3",strokeOpacity:.5}),e.jsx(le,{y:N.downlink.avg,stroke:"#3b82f6",strokeDasharray:"3 3",strokeOpacity:.5})]}),e.jsx(z,{contentStyle:{backgroundColor:k,border:`1px solid ${x}`,borderRadius:"8px"},labelStyle:{color:v},formatter:(w,u)=>[$==="packets"?`${w} pps`:`${w.toFixed(3)} ${D}`,u]}),e.jsx(Q,{}),e.jsx(R,{type:"monotone",dataKey:$==="packets"?"uplinkPkts":"uplink",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"‚Üë Uplink",isAnimationActive:!1}),e.jsx(R,{type:"monotone",dataKey:$==="packets"?"downlinkPkts":"downlink",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"‚Üì Downlink",isAnimationActive:!1})]})})}),N&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:`${S} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"Peak Uplink"}),e.jsxs("div",{className:"text-green-400 font-mono",children:[N.uplink.max.toFixed(2)," ",D]})]}),e.jsxs("div",{className:`${S} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"Peak Downlink"}),e.jsxs("div",{className:"text-blue-400 font-mono",children:[N.downlink.max.toFixed(2)," ",D]})]}),e.jsxs("div",{className:`${S} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"UL Packets (60s)"}),e.jsx("div",{className:"text-green-400/80 font-mono",children:N.packets.uplinkTotal.toLocaleString()})]}),e.jsxs("div",{className:`${S} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"DL Packets (60s)"}),e.jsx("div",{className:"text-blue-400/80 font-mono",children:N.packets.downlinkTotal.toLocaleString()})]})]})]})}function ie(t){return{INVALID_TEID:"bg-red-500/20 text-red-400",NO_PDR_MATCH:"bg-red-600/20 text-red-300",NO_GTP_TUNNEL:"bg-red-700/20 text-red-400",QOS_VIOLATION:"bg-orange-500/20 text-orange-400",POLICY_DROP:"bg-orange-600/20 text-orange-300",NO_FAR_ACTION:"bg-yellow-500/20 text-yellow-400",BUFFER_OVERFLOW:"bg-purple-500/20 text-purple-400",MEMORY_ERROR:"bg-purple-600/20 text-purple-300",MTU_EXCEEDED:"bg-pink-500/20 text-pink-400",TTL_EXPIRED:"bg-pink-600/20 text-pink-300",ENCAP_FAILED:"bg-blue-500/20 text-blue-400",DECAP_FAILED:"bg-blue-600/20 text-blue-300",MALFORMED_GTP:"bg-cyan-500/20 text-cyan-400",ROUTING_DROP:"bg-slate-500/20 text-slate-400",KERNEL_DROP:"bg-slate-600/20 text-slate-300"}[t]||"bg-slate-500/20 text-slate-400"}function _e(t){return t>=1024?`${(t/1024).toFixed(1)} KB`:`${t} B`}function De({drops:t,theme:s="dark"}){var y,S;const[a,d]=j.useState(null),[n,m]=j.useState(!1),o=t.total>0,b=Math.max(...Object.values(t.by_reason||{}),1),$=n?t.recent_drops||[]:(t.recent_drops||[]).slice(0,5),i=s==="dark"?"text-slate-400":"text-gray-500",g=s==="dark"?"text-slate-500":"text-gray-400",h=s==="dark"?"bg-slate-800/30":"bg-gray-50",k=s==="dark"?"bg-slate-700":"bg-gray-200",x=s==="dark"?"border-slate-700":"border-gray-200",v=s==="dark"?"hover:border-slate-600":"hover:border-gray-300";return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-4 rounded-lg ${o?"bg-red-500/10":"bg-green-500/10"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-2xl ${o?"pulse-alert":""}`,children:o?"‚ö†Ô∏è":"‚úÖ"}),e.jsxs("div",{children:[e.jsx("div",{className:`font-semibold ${o?"text-red-400":"text-green-400"}`,children:o?`${t.total.toLocaleString()} Drops Detected`:"No Drops Detected"}),e.jsxs("div",{className:i,children:["Drop Rate: ",t.rate_percent.toFixed(4),"%"]})]})]}),o&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-400",children:[t.rate_percent.toFixed(2),"%"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"packet loss"})]})]})}),Object.keys(t.by_reason||{}).length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-medium ${s==="dark"?"text-slate-300":"text-gray-700"} mb-3`,children:"Drop Reasons Breakdown"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.by_reason).sort(([,r],[,f])=>f-r).map(([r,f])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ie(r)}`,children:r}),e.jsxs("span",{className:`text-sm font-mono ${s==="dark"?"text-slate-300":"text-gray-700"}`,children:[f.toLocaleString()," (",(f/t.total*100).toFixed(1),"%)"]})]}),e.jsx("div",{className:`h-2 ${k} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-400 transition-all duration-500",style:{width:`${f/b*100}%`}})})]},r))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:`text-sm font-medium ${s==="dark"?"text-slate-300":"text-gray-700"}`,children:"Recent Drop Events"}),(((y=t.recent_drops)==null?void 0:y.length)||0)>5&&e.jsx("button",{onClick:()=>m(!n),className:"text-xs text-cyan-400 hover:text-cyan-300",children:n?"Show Less":`Show All (${(S=t.recent_drops)==null?void 0:S.length})`})]}),!t.recent_drops||t.recent_drops.length===0?e.jsxs("div",{className:`text-center py-6 ${g} text-sm ${h} rounded-lg`,children:[e.jsx("div",{className:"text-3xl mb-2",children:"üéâ"}),e.jsx("p",{children:"No recent drop events"}),e.jsx("p",{className:"text-xs mt-1",children:"Network is running smoothly"})]}):e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:$.map((r,f)=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${a===f?`${s==="dark"?"bg-slate-700/50":"bg-gray-100"} border-cyan-500`:`${h} ${x} ${v}`}`,onClick:()=>d(a===f?null:f),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-lg ${r.direction==="uplink"?"text-green-400":"text-blue-400"}`,children:r.direction==="uplink"?"‚Üë":"‚Üì"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-cyan-400 text-sm",children:r.teid}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ie(r.reason)}`,children:r.reason})]}),e.jsx("div",{className:`text-xs ${g} mt-0.5`,children:new Date(r.timestamp).toLocaleString()})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:`text-sm font-mono ${s==="dark"?"text-slate-300":"text-gray-700"}`,children:_e(r.pkt_len)})})]}),a===f&&e.jsxs("div",{className:`mt-3 pt-3 border-t ${x} grid grid-cols-2 gap-3 text-xs`,children:[e.jsxs("div",{children:[e.jsx("span",{className:g,children:"Source IP:"}),e.jsx("span",{className:`ml-2 font-mono ${s==="dark"?"text-slate-300":"text-gray-700"}`,children:r.src_ip})]}),e.jsxs("div",{children:[e.jsx("span",{className:g,children:"Dest IP:"}),e.jsx("span",{className:`ml-2 font-mono ${s==="dark"?"text-slate-300":"text-gray-700"}`,children:r.dst_ip})]}),e.jsxs("div",{children:[e.jsx("span",{className:g,children:"Direction:"}),e.jsx("span",{className:`ml-2 ${r.direction==="uplink"?"text-green-400":"text-blue-400"}`,children:r.direction==="uplink"?"Uplink (UE ‚Üí DN)":"Downlink (DN ‚Üí UE)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:g,children:"Packet Size:"}),e.jsxs("span",{className:`ml-2 font-mono ${s==="dark"?"text-slate-300":"text-gray-700"}`,children:[r.pkt_len," bytes"]})]})]})]},f))})]})]})}const te="/api/v1";async function Le(){const t=await fetch(`${te}/metrics/traffic`);if(!t.ok)throw new Error("Failed to fetch traffic metrics");return t.json()}async function Pe(){const t=await fetch(`${te}/metrics/drops`);if(!t.ok)throw new Error("Failed to fetch drop metrics");return t.json()}async function me(){const t=await fetch(`${te}/sessions`);if(!t.ok)throw new Error("Failed to fetch sessions");return t.json()}function Ce(t,s,a){const d=window.location.protocol==="https:"?"wss:":"ws:",n=new WebSocket(`${d}//${window.location.host}/ws/metrics`);return n.onmessage=m=>{try{const o=JSON.parse(m.data);t(o)}catch(o){console.error("Failed to parse WebSocket message:",o)}},n.onerror=s,n.onclose=a,n}function H(t){return!t||t===0?"0 B":t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(2)} KB`:t<1024*1024*1024?`${(t/1024/1024).toFixed(2)} MB`:`${(t/1024/1024/1024).toFixed(2)} GB`}function ee(t){if(!t)return"N/A";try{const s=new Date(t);return isNaN(s.getTime())?t:s.toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return t}}function Me({session:t,onClose:s,theme:a}){var g,h,k,x,v;const d=((g=t.teids)==null?void 0:g[0])||"N/A",n=a==="dark"?"bg-gray-800":"bg-white",m=a==="dark"?"bg-gray-700/50":"bg-gray-100",o=a==="dark"?"text-white":"text-gray-900",b=a==="dark"?"text-gray-400":"text-gray-600",$=a==="dark"?"border-gray-600":"border-gray-300",i=a==="dark"?"bg-gray-700/50":"bg-gray-100";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${n} rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 px-6 py-4 rounded-t-xl flex justify-between items-center sticky top-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"PDU Session Ë©≥Á¥∞Ë≥áË®ä"}),e.jsxs("p",{className:"text-cyan-100 text-sm",children:["SEID: ",t.seid]})]}),e.jsx("button",{onClick:s,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),"Áî®Êà∂Ë≠òÂà•"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(P,{label:"SUPI (Áî®Êà∂Ê∞∏‰πÖË≠òÂà•)",value:t.supi||"Êú™Êèê‰æõ",icon:"üÜî",theme:a}),e.jsx(P,{label:"UE IP Âú∞ÂùÄ",value:t.ue_ip||"N/A",icon:"üåê",theme:a}),e.jsx(P,{label:"SEID (Session Endpoint ID)",value:t.seid,icon:"üîó",theme:a}),e.jsx(P,{label:"TEID (Tunnel Endpoint ID)",value:d,icon:"üöá",theme:a})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})}),"Á∂≤Ë∑ØËàá QoS Ë≥áË®ä"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(P,{label:"DNN (Data Network Name)",value:t.dnn||"Êú™Ëß£Êûê",icon:"üì°",theme:a}),e.jsx(P,{label:"QFI (QoS Flow ID)",value:((h=t.qfi)==null?void 0:h.toString())||"N/A",icon:"‚ö°",theme:a})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"GTP-U ÈößÈÅìË≥áË®ä"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`${m} rounded-lg p-4 border border-purple-500/30`,children:[e.jsx("h4",{className:"text-purple-300 font-medium mb-2",children:"üì§ UPF Á´ØÈªû"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:b,children:"IP Âú∞ÂùÄ:"}),e.jsx("span",{className:`${o} font-mono`,children:t.upf_ip||"Êú™Áü•"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:b,children:"TEIDs:"}),e.jsx("span",{className:`${o} font-mono text-sm`,children:((k=t.teids)==null?void 0:k.join(", "))||"N/A"})]})]})]}),e.jsxs("div",{className:`${m} rounded-lg p-4 border border-blue-500/30`,children:[e.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:"üì• gNB Á´ØÈªû"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:b,children:"IP Âú∞ÂùÄ:"}),e.jsx("span",{className:`${o} font-mono`,children:t.gnb_ip||"Êú™Áü•"})]})})]})]})]}),(t.mbr_ul_kbps||t.mbr_dl_kbps)&&e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"È†ªÂØ¨ÈôêÂà∂ (MBR)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.mbr_ul_kbps&&e.jsx(P,{label:"MBR ‰∏äË°å",value:`${(t.mbr_ul_kbps/1e3).toFixed(0)} Mbps`,icon:"‚¨ÜÔ∏è",theme:a}),t.mbr_dl_kbps&&e.jsx(P,{label:"MBR ‰∏ãË°å",value:`${(t.mbr_dl_kbps/1e3).toFixed(0)} Mbps`,icon:"‚¨áÔ∏è",theme:a})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"ÊµÅÈáèÁµ±Ë®à"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(K,{label:"‰∏äË°åÂ∞ÅÂåÖÊï∏",value:(t.packets_ul||0).toLocaleString(),icon:"üì§",color:"blue",theme:a}),e.jsx(K,{label:"‰∏ãË°åÂ∞ÅÂåÖÊï∏",value:(t.packets_dl||0).toLocaleString(),icon:"üì•",color:"green",theme:a}),e.jsx(K,{label:"‰∏äË°åÊµÅÈáè",value:H(t.bytes_ul||0),icon:"‚¨ÜÔ∏è",color:"blue",theme:a}),e.jsx(K,{label:"‰∏ãË°åÊµÅÈáè",value:H(t.bytes_dl||0),icon:"‚¨áÔ∏è",color:"green",theme:a})]}),e.jsxs("div",{className:`mt-4 ${m} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:b,children:"Á∏ΩÊµÅÈáè"}),e.jsx("span",{className:`text-xl font-bold ${o}`,children:H((t.bytes_ul||0)+(t.bytes_dl||0))})]}),(t.bytes_ul||0)+(t.bytes_dl||0)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mt-2 w-full ${a==="dark"?"bg-gray-600":"bg-gray-300"} rounded-full h-2`,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full",style:{width:`${(t.bytes_ul||0)/((t.bytes_ul||0)+(t.bytes_dl||0))*100}%`}})}),e.jsxs("div",{className:`flex justify-between text-xs ${b} mt-1`,children:[e.jsxs("span",{children:["‰∏äË°å: ",((t.bytes_ul||0)/((t.bytes_ul||0)+(t.bytes_dl||0))*100).toFixed(1),"%"]}),e.jsxs("span",{children:["‰∏ãË°å: ",((t.bytes_dl||0)/((t.bytes_ul||0)+(t.bytes_dl||0))*100).toFixed(1),"%"]})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"ÊôÇÈñìËàáÁãÄÊÖã"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(P,{label:"Âª∫Á´ãÊôÇÈñì",value:ee(t.created_at),icon:"üïê",theme:a}),e.jsx(P,{label:"Session ÊåÅÁ∫åÊôÇÈñì",value:t.duration||"N/A",icon:"‚è±Ô∏è",theme:a}),e.jsx(P,{label:"ÊúÄÂæåÊ¥ªÂãïÊôÇÈñì",value:ee(t.last_active),icon:"üîÑ",theme:a})]}),e.jsx("div",{className:`mt-4 ${m} rounded-lg p-4 border border-green-500/30`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.status==="Active"?"bg-green-500 animate-pulse":"bg-gray-500"}`}),e.jsx("span",{className:`text-lg font-medium ${o}`,children:t.status==="Active"?"üü¢ Ê¥ªË∫ç‰∏≠":t.status||"Êú™Áü•"})]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"SEID ‚Üî TEID Êò†Â∞ÑÈóú‰øÇ"]}),e.jsxs("div",{className:`${a==="dark"?"bg-gray-900/50":"bg-gray-50"} rounded-lg p-4 border border-pink-500/30`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"bg-cyan-600/30 rounded-lg px-6 py-4 text-center border border-cyan-500",children:[e.jsx("div",{className:"text-cyan-300 text-sm mb-1",children:"PFCP Session"}),e.jsxs("div",{className:`${o} font-bold text-xl`,children:["SEID: ",t.seid]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})}),e.jsx("span",{className:`text-xs ${b}`,children:"Â∞çÊáâ"})]}),e.jsxs("div",{className:"bg-purple-600/30 rounded-lg px-6 py-4 text-center border border-purple-500",children:[e.jsx("div",{className:"text-purple-300 text-sm mb-1",children:"GTP-U Tunnel"}),e.jsxs("div",{className:`${o} font-bold text-xl`,children:["TEIDs: ",((x=t.teids)==null?void 0:x.length)||0," ÂÄã"]}),e.jsxs("div",{className:"text-purple-200 text-sm mt-1",children:[(v=t.teids)==null?void 0:v.slice(0,2).join(", "),t.teids&&t.teids.length>2?"...":""]})]})]}),e.jsx("div",{className:`mt-4 text-center text-sm ${b}`,children:"Ê≠§ PDU Session ÈÄèÈÅé PFCP ÂçîÂÆöÂª∫Á´ãÔºå‰∏¶Âú®Áî®Êà∂Âπ≥Èù¢‰ΩøÁî® GTP-U ÈößÈÅìÂÇ≥Ëº∏Ë≥áÊñô"})]})]})]}),e.jsx("div",{className:`${i} px-6 py-4 rounded-b-xl border-t ${$}`,children:e.jsx("button",{onClick:s,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"ÈóúÈñâ"})})]})})}function P({label:t,value:s,icon:a,theme:d="dark"}){const n=d==="dark"?"bg-gray-700/50":"bg-gray-100",m=d==="dark"?"border-gray-600":"border-gray-300",o=d==="dark"?"text-gray-400":"text-gray-600",b=d==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:`${n} rounded-lg p-3 border ${m}`,children:[e.jsxs("div",{className:`${o} text-xs mb-1 flex items-center gap-1`,children:[a&&e.jsx("span",{children:a}),t]}),e.jsx("div",{className:`${b} font-medium break-all`,children:s})]})}function K({label:t,value:s,icon:a,color:d="blue",theme:n="dark"}){const m={blue:"from-blue-500/20 to-blue-600/20 border-blue-500/30",green:"from-green-500/20 to-green-600/20 border-green-500/30",yellow:"from-yellow-500/20 to-yellow-600/20 border-yellow-500/30",red:"from-red-500/20 to-red-600/20 border-red-500/30"},o=n==="dark"?"text-gray-400":"text-gray-600",b=n==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:`bg-gradient-to-br ${m[d]} rounded-lg p-3 border`,children:[e.jsxs("div",{className:`${o} text-xs mb-1 flex items-center gap-1`,children:[a&&e.jsx("span",{children:a}),t]}),e.jsx("div",{className:`${b} font-bold text-lg`,children:s})]})}function Te({theme:t="dark"}){const[s,a]=j.useState([]),[d,n]=j.useState(null),[m,o]=j.useState(!1),[b,$]=j.useState(null),[i,g]=j.useState("created_at"),[h,k]=j.useState("desc"),[x,v]=j.useState("");j.useEffect(()=>{const r=async()=>{o(!0);try{const N=await me();a(N.sessions||[]),$(null)}catch(N){$("ÁÑ°Ê≥ïËºâÂÖ• PDU Sessions"),console.error(N)}finally{o(!1)}};r();const f=setInterval(r,5e3);return()=>clearInterval(f)},[]);const y=j.useMemo(()=>{let r=[...s];if(x){const f=x.toLowerCase();r=r.filter(N=>{var L,E,D,w,u;return((L=N.seid)==null?void 0:L.toLowerCase().includes(f))||((E=N.ue_ip)==null?void 0:E.toLowerCase().includes(f))||((D=N.supi)==null?void 0:D.toLowerCase().includes(f))||((w=N.dnn)==null?void 0:w.toLowerCase().includes(f))||((u=N.teids)==null?void 0:u.some(p=>p.toLowerCase().includes(f)))})}return r.sort((f,N)=>{let L=0;switch(i){case"seid":L=(f.seid||"").localeCompare(N.seid||"");break;case"ue_ip":L=(f.ue_ip||"").localeCompare(N.ue_ip||"");break;case"packets":const E=(f.packets_ul||0)+(f.packets_dl||0),D=(N.packets_ul||0)+(N.packets_dl||0);L=E-D;break;case"created_at":L=(f.created_at||"").localeCompare(N.created_at||"");break}return h==="asc"?L:-L}),r},[s,x,i,h]),S=r=>{i===r?k(f=>f==="asc"?"desc":"asc"):(g(r),k("desc"))};return m&&s.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):b&&s.length===0?e.jsx("div",{className:"bg-red-500/20 text-red-400 p-4 rounded-lg text-center",children:b}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("input",{type:"text",placeholder:"ÊêúÂ∞ã SEID, UE IP, SUPI, DNN, TEID...",value:x,onChange:r=>v(r.target.value),className:`w-full rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-500 ${t==="dark"?"bg-gray-700 text-white placeholder-gray-400":"bg-gray-100 text-gray-900 placeholder-gray-500 border border-gray-300"}`}),e.jsx("svg",{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${t==="dark"?"text-gray-400":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:["Á∏ΩÂÖ± ",e.jsx("span",{className:"text-cyan-400 font-bold",children:s.length})," ÂÄã Sessions"]}),x&&e.jsxs("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:["Á¨¶Âêà ",e.jsx("span",{className:"text-green-400 font-bold",children:y.length})," Á≠Ü"]})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{field:"created_at",label:"Âª∫Á´ãÊôÇÈñì"},{field:"seid",label:"SEID"},{field:"ue_ip",label:"UE IP"},{field:"packets",label:"Â∞ÅÂåÖÊï∏"}].map(({field:r,label:f})=>e.jsxs("button",{onClick:()=>S(r),className:`px-3 py-1 rounded-lg text-sm transition-colors ${i===r?"bg-cyan-600 text-white":t==="dark"?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[f,i===r&&e.jsx("span",{className:"ml-1",children:h==="asc"?"‚Üë":"‚Üì"})]},r))}),y.length===0?e.jsxs("div",{className:`rounded-lg p-8 text-center ${t==="dark"?"bg-gray-800/50":"bg-gray-100"}`,children:[e.jsx("div",{className:`text-lg mb-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:x?"üîç Ê≤íÊúâÁ¨¶ÂêàÁöÑ Sessions":"üì≠ ÁõÆÂâçÊ≤íÊúâÊ¥ªË∫çÁöÑ PDU Sessions"}),e.jsx("p",{className:"text-sm text-gray-500",children:x?"Ë´ãÂòóË©¶ÂÖ∂‰ªñÊêúÂ∞ãÊ¢ù‰ª∂":"Áï∂ UE Âª∫Á´ã PDU Session ÊôÇÊúÉËá™ÂãïÈ°ØÁ§∫Âú®ÈÄôË£°"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((r,f)=>{var N;return e.jsxs("div",{onClick:()=>n(r),className:`rounded-xl p-4 cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg hover:shadow-cyan-500/10 border hover:border-cyan-500/50 ${t==="dark"?"bg-gray-800/80 hover:bg-gray-700/80 border-gray-700":"bg-white hover:bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-cyan-400 font-bold text-lg",children:["SEID: ",r.seid]}),e.jsxs("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:["TEIDs: ",((N=r.teids)==null?void 0:N.length)||0," ÂÄã"]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${r.status==="Active"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:r.status==="Active"?"Ê¥ªË∫ç":r.status||"Êú™Áü•"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"UE IP:"}),e.jsx("span",{className:`font-mono ${t==="dark"?"text-white":"text-gray-900"}`,children:r.ue_ip||"N/A"})]}),r.supi&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"SUPI:"}),e.jsx("span",{className:`font-mono text-xs ${t==="dark"?"text-white":"text-gray-900"}`,children:r.supi})]}),r.dnn&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"DNN:"}),e.jsx("span",{className:t==="dark"?"text-white":"text-gray-900",children:r.dnn})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"Â∞ÅÂåÖ:"}),e.jsxs("span",{className:t==="dark"?"text-white":"text-gray-900",children:["‚Üë",(r.packets_ul||0).toLocaleString()," / ‚Üì",(r.packets_dl||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"ÊµÅÈáè:"}),e.jsx("span",{className:t==="dark"?"text-white":"text-gray-900",children:H((r.bytes_ul||0)+(r.bytes_dl||0))})]})]}),e.jsxs("div",{className:`mt-3 pt-3 border-t flex justify-between items-center ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:r.duration||ee(r.created_at)}),e.jsx("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},`${r.seid}-${f}`)})}),d&&e.jsx(Me,{session:d,onClose:()=>n(null),theme:t})]})}const I=["#22c55e","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899","#14b8a6","#f97316","#6366f1"];function C(t){return t>=1e9?`${(t/1e9).toFixed(2)} GB`:t>=1e6?`${(t/1e6).toFixed(2)} MB`:t>=1e3?`${(t/1e3).toFixed(2)} KB`:`${t} B`}function Ee({sessions:t,theme:s="dark"}){const[a,d]=j.useState("bar"),[n,m]=j.useState("total"),[o,b]=j.useState(new Map),$=s==="dark"?"#334155":"#e2e8f0",i=s==="dark"?"#64748b":"#94a3b8",g=s==="dark"?"#1e293b":"#ffffff",h=s==="dark"?"#334155":"#e2e8f0",k=s==="dark"?"#e2e8f0":"#1e293b",x=s==="dark"?"text-slate-400":"text-gray-500",v=s==="dark"?"bg-slate-700":"bg-gray-200",y=s==="dark"?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900",S=s==="dark"?"bg-slate-700/50":"bg-gray-100",r=s==="dark"?"text-white":"text-gray-900",f=s==="dark"?"border-slate-700":"border-gray-200",N=s==="dark"?"hover:bg-slate-700/30":"hover:bg-gray-50",L=s==="dark"?"bg-slate-700 border-slate-600":"bg-white border-gray-300",E=s==="dark"?"bg-slate-700":"bg-gray-200",D=j.useMemo(()=>t.map((l,c)=>({name:`UE ${c+1}`,seid:l.seid,ue_ip:l.ue_ip,uplink:l.bytes_ul||0,downlink:l.bytes_dl||0,total:(l.bytes_ul||0)+(l.bytes_dl||0),packetsUL:l.packets_ul||0,packetsDL:l.packets_dl||0})).sort((l,c)=>c[n]-l[n]),[t,n]);j.useEffect(()=>{if(t.length===0)return;const l=Date.now();b(c=>{const _=new Map(c);return t.forEach(M=>{const T=M.seid,A=(M.bytes_ul||0)+(M.bytes_dl||0),U=_.get(T)||[];U.push({bytes:A,time:l});const W=l-6e4,F=U.filter(B=>B.time>W);_.set(T,F)}),_})},[t]);const w=j.useMemo(()=>{const l=[],c=Date.now();for(let _=12;_>=0;_--){const M=c-_*5e3,T={time:new Date(M).toLocaleTimeString("en-US",{hour12:!1,minute:"2-digit",second:"2-digit"})};t.slice(0,5).forEach((A,U)=>{const F=(o.get(A.seid)||[]).reduce((B,se)=>Math.abs(se.time-M)<Math.abs(B.time-M)?se:B,{bytes:0,time:0});T[`session${U}`]=F.bytes}),l.push(T)}return l},[t,o]),u=j.useMemo(()=>D.slice(0,8).map((l,c)=>({name:l.ue_ip,value:l.total,color:I[c%I.length]})),[D]),p=j.useMemo(()=>D.reduce((l,c)=>({uplink:l.uplink+c.uplink,downlink:l.downlink+c.downlink,total:l.total+c.total,packetsUL:l.packetsUL+c.packetsUL,packetsDL:l.packetsDL+c.packetsDL}),{uplink:0,downlink:0,total:0,packetsUL:0,packetsDL:0}),[D]);return t.length===0?e.jsx("div",{className:`h-80 flex items-center justify-center ${x}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üìä"}),e.jsx("p",{children:"No active sessions"}),e.jsx("p",{className:`text-sm mt-1 ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"Session traffic will appear here"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm ${x}`,children:"View:"}),e.jsx("div",{className:`flex ${v} rounded-lg p-1`,children:["bar","pie","trend"].map(l=>e.jsx("button",{onClick:()=>d(l),className:`px-3 py-1 text-sm rounded-md transition-colors ${a===l?"bg-blue-500 text-white":y}`,children:l==="bar"?"üìä Bar":l==="pie"?"ü•ß Pie":"üìà Trend"},l))})]}),a==="bar"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm ${x}`,children:"Sort by:"}),e.jsxs("select",{value:n,onChange:l=>m(l.target.value),className:`${L} ${r} text-sm rounded-lg px-3 py-1 border`,children:[e.jsx("option",{value:"total",children:"Total Traffic"}),e.jsx("option",{value:"uplink",children:"Uplink"}),e.jsx("option",{value:"downlink",children:"Downlink"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:`${S} rounded-lg p-3`,children:[e.jsx("div",{className:`text-xs ${x}`,children:"Total Sessions"}),e.jsx("div",{className:`text-xl font-bold ${r}`,children:t.length})]}),e.jsxs("div",{className:`${S} rounded-lg p-3`,children:[e.jsx("div",{className:`text-xs ${x}`,children:"Total Traffic"}),e.jsx("div",{className:`text-xl font-bold ${r}`,children:C(p.total)})]}),e.jsxs("div",{className:`${S} rounded-lg p-3`,children:[e.jsx("div",{className:"text-xs text-green-400",children:"‚Üë Total Uplink"}),e.jsx("div",{className:"text-xl font-bold text-green-400",children:C(p.uplink)})]}),e.jsxs("div",{className:`${S} rounded-lg p-3`,children:[e.jsx("div",{className:"text-xs text-blue-400",children:"‚Üì Total Downlink"}),e.jsx("div",{className:"text-xl font-bold text-blue-400",children:C(p.downlink)})]})]}),e.jsxs("div",{className:"h-72",children:[a==="bar"&&e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(pe,{data:D.slice(0,10),layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[e.jsx(X,{strokeDasharray:"3 3",stroke:$}),e.jsx(Y,{type:"number",stroke:i,fontSize:11,tickFormatter:l=>C(l)}),e.jsx(O,{type:"category",dataKey:"ue_ip",stroke:i,fontSize:11,width:90}),e.jsx(z,{contentStyle:{backgroundColor:g,border:`1px solid ${h}`,borderRadius:"8px"},labelStyle:{color:k},formatter:(l,c)=>[C(l),c==="uplink"?"‚Üë Uplink":"‚Üì Downlink"],labelFormatter:l=>`UE IP: ${l}`}),e.jsx(Q,{}),e.jsx(re,{dataKey:"uplink",name:"‚Üë Uplink",fill:"#22c55e",stackId:"stack"}),e.jsx(re,{dataKey:"downlink",name:"‚Üì Downlink",fill:"#3b82f6",stackId:"stack"})]})}),a==="pie"&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(fe,{children:[e.jsx(je,{data:u,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",label:({name:l,percent:c})=>`${l.split(".").pop()} (${(c*100).toFixed(0)}%)`,labelLine:{stroke:i},children:u.map((l,c)=>e.jsx(be,{fill:l.color},`cell-${c}`))}),e.jsx(z,{contentStyle:{backgroundColor:g,border:`1px solid ${h}`,borderRadius:"8px",color:k},itemStyle:{color:k},labelStyle:{color:k},formatter:l=>[C(l),"Traffic"]})]})})}),a==="trend"&&e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(ce,{data:w,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(X,{strokeDasharray:"3 3",stroke:$}),e.jsx(Y,{dataKey:"time",stroke:i,fontSize:11}),e.jsx(O,{stroke:i,fontSize:11,tickFormatter:l=>C(l)}),e.jsx(z,{contentStyle:{backgroundColor:g,border:`1px solid ${h}`,borderRadius:"8px"},labelStyle:{color:k},formatter:l=>[C(l)]}),e.jsx(Q,{}),t.slice(0,5).map((l,c)=>e.jsx(R,{type:"monotone",dataKey:`session${c}`,name:l.ue_ip,stroke:I[c%I.length],strokeWidth:2,dot:!1,isAnimationActive:!1},l.seid))]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:`text-sm font-medium ${s==="dark"?"text-slate-300":"text-gray-700"} mb-2`,children:"Session Traffic Details"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${x} border-b ${f}`,children:[e.jsx("th",{className:"text-left py-2 px-2",children:"#"}),e.jsx("th",{className:"text-left py-2 px-2",children:"UE IP"}),e.jsx("th",{className:"text-left py-2 px-2",children:"SEID"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üë UL Bytes"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üì DL Bytes"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üë UL Pkts"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üì DL Pkts"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),e.jsx("th",{className:"text-center py-2 px-2",children:"Share"})]})}),e.jsx("tbody",{children:D.slice(0,10).map((l,c)=>{const _=p.total>0?l.total/p.total*100:0;return e.jsxs("tr",{className:`border-b ${f}/50 ${N}`,children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:I[c%I.length]}})}),e.jsx("td",{className:"py-2 px-2 font-mono text-cyan-400",children:l.ue_ip}),e.jsx("td",{className:`py-2 px-2 font-mono text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:l.seid}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-green-400",children:C(l.uplink)}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-blue-400",children:C(l.downlink)}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-green-400/70",children:l.packetsUL.toLocaleString()}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-blue-400/70",children:l.packetsDL.toLocaleString()}),e.jsx("td",{className:`py-2 px-2 text-right font-mono ${r} font-medium`,children:C(l.total)}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex-1 h-2 ${E} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${_}%`,backgroundColor:I[c%I.length]}})}),e.jsxs("span",{className:`text-xs ${x} w-12 text-right`,children:[_.toFixed(1),"%"]})]})})]},l.seid)})})]})}),t.length>10&&e.jsxs("div",{className:`text-center text-sm ${s==="dark"?"text-slate-500":"text-gray-400"} mt-2`,children:["Showing top 10 of ",t.length," sessions"]})]})]})}function Be({sessions:t,drops:s,theme:a="dark"}){var S;const d=s.total>0,n=t.length>0,m=t.reduce((r,f)=>r+f.packets_ul,0),o=t.reduce((r,f)=>r+f.packets_dl,0),b=t.reduce((r,f)=>r+f.teids.length,0),$=a==="dark"?"text-white":"text-gray-900",i=a==="dark"?"text-slate-300":"text-gray-600",g=a==="dark"?"text-slate-500":"text-gray-400",h=a==="dark"?"text-slate-400":"text-gray-500",k=a==="dark"?"bg-slate-800/50":"bg-gray-100",x=a==="dark"?"bg-slate-700":"bg-gray-200",v=a==="dark"?"border-slate-600":"border-gray-300",y=a==="dark"?"bg-slate-600":"bg-gray-300";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-xl flex items-center justify-center text-2xl md:text-3xl transition-all ${n?"bg-green-500/20 border-2 border-green-500 shadow-lg shadow-green-500/20":`${x} border-2 ${v}`}`,children:"üì±"}),e.jsx("span",{className:`mt-2 text-sm font-medium ${i}`,children:"UE"}),t.length>0&&e.jsx("span",{className:"text-xs text-cyan-400 font-mono",children:(S=t[0])==null?void 0:S.ue_ip}),t.length>1&&e.jsxs("span",{className:`text-xs ${g}`,children:["+",t.length-1," more"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 md:w-12 h-1 ${n?"bg-gradient-to-r from-green-500 to-green-400":y}`}),e.jsx("div",{className:"flex flex-col items-center px-1 md:px-2",children:e.jsx("span",{className:g,children:"N1/N2"})}),e.jsx("div",{className:`w-8 md:w-12 h-1 ${n?"bg-gradient-to-r from-green-400 to-green-500":y}`})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-xl flex items-center justify-center text-2xl md:text-3xl transition-all ${n?"bg-green-500/20 border-2 border-green-500 shadow-lg shadow-green-500/20":`${x} border-2 ${v}`}`,children:"üì°"}),e.jsx("span",{className:`mt-2 text-sm font-medium ${i}`,children:"gNB"}),e.jsx("span",{className:`text-xs ${g}`,children:"UERANSIM"})]}),e.jsxs("div",{className:"flex items-center relative",children:[e.jsx("div",{className:`w-8 md:w-16 h-1 ${n?"bg-gradient-to-r from-green-500 to-cyan-500":y}`,children:n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 bg-green-400 rounded-full animate-ping"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.5s",left:"50%"}})]})}),e.jsxs("div",{className:"flex flex-col items-center px-1 md:px-2",children:[e.jsx("span",{className:"text-cyan-400 text-xs font-medium",children:"N3"}),e.jsx("span",{className:`${g} text-xs`,children:"GTP-U"}),b>0&&e.jsxs("span",{className:"text-xs text-cyan-400",children:[b," TEIDs"]})]}),e.jsx("div",{className:`w-8 md:w-16 h-1 ${n?"bg-gradient-to-r from-cyan-500 to-blue-500":y}`})]}),e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2",children:e.jsx("span",{className:"text-xs bg-purple-500/30 text-purple-400 px-2 py-0.5 rounded-full",children:"eBPF"})}),e.jsxs("div",{className:`w-20 h-20 md:w-24 md:h-24 rounded-xl flex flex-col items-center justify-center border-2 transition-all ${d?"bg-red-500/20 border-red-500 pulse-alert shadow-lg shadow-red-500/30":n?"bg-blue-500/20 border-blue-500 shadow-lg shadow-blue-500/20":`${x} ${v}`}`,children:[e.jsx("span",{className:"text-3xl md:text-4xl",children:"üñ•Ô∏è"}),n&&e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsxs("span",{className:"text-xs text-green-400",children:["‚Üë",m]}),e.jsxs("span",{className:"text-xs text-blue-400",children:["‚Üì",o]})]})]}),e.jsx("span",{className:`mt-2 text-sm font-bold ${$}`,children:"UPF"}),e.jsx("span",{className:`text-xs ${h}`,children:"free5GC + gtp5g"}),d&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5 animate-bounce",children:["‚ö†Ô∏è ",s.total]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 md:w-12 h-1 ${n?"bg-gradient-to-r from-blue-500 to-green-500":y}`}),e.jsx("div",{className:"flex flex-col items-center px-1 md:px-2",children:e.jsx("span",{className:`${g} text-xs`,children:"N6"})}),e.jsx("div",{className:`w-8 md:w-12 h-1 ${n?"bg-gradient-to-r from-green-500 to-green-400":y}`})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-xl flex items-center justify-center text-2xl md:text-3xl transition-all ${n?"bg-green-500/20 border-2 border-green-500 shadow-lg shadow-green-500/20":`${x} border-2 ${v}`}`,children:"üåê"}),e.jsx("span",{className:`mt-2 text-sm font-medium ${i}`,children:"DN"}),e.jsx("span",{className:`text-xs ${g}`,children:"Internet"})]})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:h,children:"Active Connection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-cyan-500 rounded-full"}),e.jsx("span",{className:h,children:"GTP-U Tunnel"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:h,children:"Packet Drop"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:h,children:"eBPF Monitoring"})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:`${k} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:t.length}),e.jsx("div",{className:`text-xs ${g}`,children:"PDU Sessions"})]}),e.jsxs("div",{className:`${k} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:b}),e.jsx("div",{className:`text-xs ${g}`,children:"Active TEIDs"})]}),e.jsxs("div",{className:`${k} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:m.toLocaleString()}),e.jsx("div",{className:`text-xs ${g}`,children:"Uplink Packets"})]}),e.jsxs("div",{className:`${k} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:o.toLocaleString()}),e.jsx("div",{className:`text-xs ${g}`,children:"Downlink Packets"})]})]})]})}function J(t){return t>=1e9?`${(t/1e9).toFixed(2)} GB`:t>=1e6?`${(t/1e6).toFixed(2)} MB`:t>=1e3?`${(t/1e3).toFixed(2)} KB`:`${t} B`}function V(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString()}function de(t){return t>=1e3?{value:(t/1e3).toFixed(2),unit:"Gbps"}:t>=1?{value:t.toFixed(2),unit:"Mbps"}:{value:(t*1e3).toFixed(0),unit:"Kbps"}}function Ie({metrics:t,drops:s,sessions:a,theme:d}){const n=de(t.uplink.throughput_mbps),m=de(t.downlink.throughput_mbps),o=t.uplink.packets+t.downlink.packets,b=t.uplink.bytes+t.downlink.bytes,$=a.reduce((S,r)=>S+r.teids.length,0),i=d==="dark"?"bg-slate-800/50":"bg-white",g=d==="dark"?"border-slate-700":"border-gray-200",h=d==="dark"?"text-white":"text-gray-900",k=d==="dark"?"text-slate-400":"text-gray-500",x=d==="dark"?"text-slate-500":"text-gray-400",v=d==="dark"?"text-slate-300":"text-gray-700",y=d==="dark"?"bg-slate-700":"bg-gray-200";return e.jsxs("div",{className:"space-y-6 pb-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g} hover:border-green-500/50 transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${k} text-sm`,children:"Uplink Traffic"}),e.jsx("span",{className:"text-green-400 text-xs font-medium px-2 py-0.5 bg-green-500/20 rounded-full",children:"‚Üë UL"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${h}`,children:n.value}),e.jsx("span",{className:`text-lg ${k}`,children:n.unit})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"Packets"}),e.jsx("div",{className:"text-green-400 font-mono",children:V(t.uplink.packets)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"Bytes"}),e.jsx("div",{className:`${v} font-mono`,children:J(t.uplink.bytes)})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:`h-1.5 ${y} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 transition-all duration-500",style:{width:`${b>0?t.uplink.bytes/b*100:50}%`}})}),e.jsxs("div",{className:`text-xs ${x} mt-1`,children:[b>0?(t.uplink.bytes/b*100).toFixed(1):50,"% of total"]})]})]}),e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g} hover:border-blue-500/50 transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${k} text-sm`,children:"Downlink Traffic"}),e.jsx("span",{className:"text-blue-400 text-xs font-medium px-2 py-0.5 bg-blue-500/20 rounded-full",children:"‚Üì DL"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${h}`,children:m.value}),e.jsx("span",{className:`text-lg ${k}`,children:m.unit})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"Packets"}),e.jsx("div",{className:"text-blue-400 font-mono",children:V(t.downlink.packets)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"Bytes"}),e.jsx("div",{className:`${v} font-mono`,children:J(t.downlink.bytes)})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:`h-1.5 ${y} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-500",style:{width:`${b>0?t.downlink.bytes/b*100:50}%`}})}),e.jsxs("div",{className:`text-xs ${x} mt-1`,children:[b>0?(t.downlink.bytes/b*100).toFixed(1):50,"% of total"]})]})]}),e.jsxs("div",{className:`${i} rounded-xl p-5 border transition-colors ${s.rate_percent>1?"border-red-500 pulse-alert":s.rate_percent>0?"border-yellow-500/50":`${g} hover:border-green-500/50`}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${k} text-sm`,children:"Drop Rate"}),e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${s.rate_percent>1?"text-red-400 bg-red-500/20":s.rate_percent>0?"text-yellow-400 bg-yellow-500/20":"text-green-400 bg-green-500/20"}`,children:s.rate_percent>1?"‚ö†Ô∏è Critical":s.rate_percent>0?"‚ö†Ô∏è Warning":"‚úì OK"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${s.rate_percent>0?"text-red-400":h}`,children:s.rate_percent.toFixed(3)}),e.jsx("span",{className:`text-lg ${k}`,children:"%"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"Total Drops"}),e.jsx("div",{className:"text-red-400 font-mono",children:V(s.total)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"Reasons"}),e.jsx("div",{className:`${v} font-mono`,children:Object.keys(s.by_reason||{}).length})]})]}),Object.keys(s.by_reason||{}).length>0&&e.jsx("div",{className:"mt-3 flex gap-1",children:Object.entries(s.by_reason).slice(0,3).map(([S,r],f)=>e.jsx("div",{className:"flex-1 h-1.5 rounded-full",style:{backgroundColor:["#ef4444","#f97316","#eab308"][f],opacity:.5+r/s.total*.5},title:`${S}: ${r}`},S))})]}),e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g} hover:border-cyan-500/50 transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${k} text-sm`,children:"Active Sessions"}),e.jsx("span",{className:"text-cyan-400 text-xs font-medium px-2 py-0.5 bg-cyan-500/20 rounded-full",children:"PDU"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${h}`,children:a.length}),e.jsx("span",{className:`text-lg ${k}`,children:"sessions"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"TEIDs"}),e.jsx("div",{className:"text-purple-400 font-mono",children:$})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${x} text-xs`,children:"UE IPs"}),e.jsx("div",{className:`${v} font-mono`,children:new Set(a.map(S=>S.ue_ip)).size})]})]}),e.jsxs("div",{className:"mt-3 flex gap-1",children:[a.slice(0,8).map((S,r)=>e.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full",title:`${S.seid}: ${S.ue_ip}`},r)),a.length>8&&e.jsxs("span",{className:`text-xs ${x}`,children:["+",a.length-8]})]})]})]}),e.jsxs("div",{className:`${i} rounded-xl p-4 border ${g} flex flex-wrap justify-center gap-8`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${x}`,children:"Total Packets"}),e.jsx("div",{className:`text-xl font-bold ${h}`,children:V(o)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${x}`,children:"Total Bytes"}),e.jsx("div",{className:`text-xl font-bold ${h}`,children:J(b)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${x}`,children:"Combined Throughput"}),e.jsxs("div",{className:`text-xl font-bold ${h}`,children:[(t.uplink.throughput_mbps+t.downlink.throughput_mbps).toFixed(2)," Mbps"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${x}`,children:"Last Updated"}),e.jsx("div",{className:`text-sm ${v}`,children:t.uplink.last_updated?new Date(t.uplink.last_updated).toLocaleTimeString():"N/A"})]})]}),e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${h} mb-4`,children:"Live Traffic (Last 60s)"}),e.jsx(Se,{metrics:t,theme:d})]}),e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:`text-lg font-semibold ${h}`,children:"Per-Session Traffic Analysis"}),e.jsxs("span",{className:`text-sm ${k}`,children:[a.length," active session",a.length!==1?"s":""]})]}),e.jsx(Ee,{sessions:a,theme:d})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${h} mb-4`,children:"Drop Events"}),e.jsx(De,{drops:s,theme:d})]}),e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${h} mb-4`,children:"PDU Sessions (SEID ‚Üî TEID)"}),e.jsx(Te,{theme:d})]})]}),e.jsxs("div",{className:`${i} rounded-xl p-5 border ${g}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${h} mb-4`,children:"Network Topology"}),e.jsx(Be,{sessions:a,drops:s,theme:d})]})]})}const Fe={uplink:{packets:0,bytes:0,throughput_mbps:0,last_updated:""},downlink:{packets:0,bytes:0,throughput_mbps:0,last_updated:""}},Ae={total:0,rate_percent:0,recent_drops:[],by_reason:{}};function Ue(){const[t,s]=j.useState(Fe),[a,d]=j.useState(Ae),[n,m]=j.useState([]),[o,b]=j.useState(!1),[$,i]=j.useState(null),g=j.useRef(null),h=j.useRef(null),k=j.useCallback(()=>{var v;if(((v=g.current)==null?void 0:v.readyState)!==WebSocket.OPEN)try{g.current=Ce(y=>{b(!0),i(null),y.data&&(y.data.traffic&&s(y.data.traffic),y.data.drops&&d(y.data.drops))},y=>{console.error("WebSocket error:",y),i("WebSocket connection error"),b(!1)},()=>{b(!1),h.current=window.setTimeout(()=>{k()},3e3)})}catch{i("Failed to create WebSocket connection"),x()}},[]),x=j.useCallback(async()=>{try{const[v,y,S]=await Promise.all([Le(),Pe(),me()]);console.log("useMetrics poll:",{uplink_mbps:v.uplink.throughput_mbps,downlink_mbps:v.downlink.throughput_mbps,uplink_pkts:v.uplink.packets}),s(v),d({...y,recent_drops:y.recent_drops||[],by_reason:y.by_reason||{}}),m(S.sessions||[]),i(null)}catch{i("Failed to fetch metrics")}},[]);return j.useEffect(()=>{x(),k();const v=setInterval(x,2e3);return()=>{clearInterval(v),h.current&&clearTimeout(h.current),g.current&&g.current.close()}},[k,x]),{metrics:t,drops:a,sessions:n,connected:o,error:$}}function Re(){const{metrics:t,drops:s,sessions:a,connected:d,error:n}=Ue(),[m,o]=j.useState("offline"),[b,$]=j.useState("data"),[i,g]=j.useState(()=>localStorage.getItem("theme")||"dark");j.useEffect(()=>{o(d&&!n?"online":n?"warning":"offline")},[d,n]),j.useEffect(()=>{document.documentElement.classList.toggle("light",i==="light"),localStorage.setItem("theme",i)},[i]);const h=()=>{g(k=>k==="dark"?"light":"dark")};return e.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${i==="dark"?"bg-cndi-dark":"bg-gray-100"}`,children:[e.jsx("header",{className:`border-b px-6 py-4 transition-colors duration-300 ${i==="dark"?"bg-slate-800/50 border-slate-700":"bg-white border-gray-200 shadow-sm"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"5G"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:"5G Observability Platform"}),e.jsx("p",{className:`text-sm ${i==="dark"?"text-slate-400":"text-gray-500"}`,children:"Real-time Network Monitoring & Analytics"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$("data"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${b==="data"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"üìä Data Plane"}),e.jsxs("button",{disabled:!0,className:`px-4 py-2 rounded-lg text-sm font-medium cursor-not-allowed relative group ${i==="dark"?"bg-slate-700/50 text-slate-500":"bg-gray-200 text-gray-400"}`,title:"Coming Soon",children:["üîß Control Plane",e.jsx("span",{className:"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] bg-yellow-500 text-yellow-900 rounded-full font-bold",children:"Soon"})]})]}),e.jsx("div",{className:`h-6 w-px ${i==="dark"?"bg-slate-600":"bg-gray-300"}`}),e.jsx("button",{onClick:h,className:`p-2 rounded-lg transition-all ${i==="dark"?"bg-slate-700 hover:bg-slate-600 text-yellow-400":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,title:i==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:i==="dark"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),e.jsx("div",{className:`h-6 w-px ${i==="dark"?"bg-slate-600":"bg-gray-300"}`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${m==="online"?"bg-green-500":m==="warning"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm ${i==="dark"?"text-slate-300":"text-gray-600"}`,children:m==="online"?"System Online":m==="warning"?"Partial Connection":"Offline"})]}),e.jsx("div",{className:`text-sm ${i==="dark"?"text-slate-400":"text-gray-500"}`,children:new Date().toLocaleTimeString()})]})]})}),e.jsxs("main",{className:"p-6",children:[n&&e.jsxs("div",{className:`mb-4 p-4 border rounded-lg ${i==="dark"?"bg-red-500/10 border-red-500/50 text-red-400":"bg-red-50 border-red-200 text-red-600"}`,children:["‚ö†Ô∏è Connection Error: ",n,". Make sure the API server is running."]}),e.jsx(Ie,{theme:i,metrics:t,drops:s,sessions:a})]}),e.jsx("footer",{className:`fixed bottom-0 left-0 right-0 border-t px-6 py-2 transition-colors duration-300 ${i==="dark"?"bg-slate-800/50 border-slate-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:`flex items-center justify-between text-sm ${i==="dark"?"text-slate-400":"text-gray-500"}`,children:[e.jsx("span",{children:"free5GC v4.1.0 | gtp5g Kernel Module"}),e.jsxs("span",{children:["WebSocket: ",d?"üü¢ Connected":"üî¥ Disconnected"]})]})})]})}Z.createRoot(document.getElementById("root")).render(e.jsx(ue.StrictMode,{children:e.jsx(Re,{})}));
